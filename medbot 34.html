<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MedBot ‚Äì Health Assistant</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --primary: #2E8B57;   /* sea green */
  --secondary: #1B4D3E; /* deep green */
  --light: #F0FFF0;     /* honeydew */
  --accent: #E0F7FA;    /* cyan */
  --muted: #5f6f6f;
  --white: #fff;
}

body {
  font-family: Inter, Arial, sans-serif;
  margin: 0;
  background: var(--light);
  color: var(--secondary);
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* Sidebar */
.sidebar {
  width: 280px;
  background: var(--white);
  border-right: 1px solid #ccc;
  display: flex;
  flex-direction: column;
  padding: 20px;
}
.sidebar h2 {
  font-size: 22px;
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 20px;
}
.reminder {
  display: flex;
  align-items: center;
  gap: 14px;
  background: var(--accent);
  padding: 12px;
  border-radius: 10px;
  margin-bottom: 16px;
  cursor: pointer;
  transition: 0.2s;
}
.reminder:hover { background: #b2dfdb; }
.reminder img { width: 40px; height: 40px; }

/* Chat Area */
.chat-container { flex: 1; display: flex; justify-content: center; align-items: center; padding: 20px; }
.chat-box {
  width: 100%;
  max-width: 850px;
  height: 90vh;
  display: flex;
  flex-direction: column;
  background: var(--white);
  border-radius: 12px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.12);
  overflow: hidden;
}

:root {
  --primary-gradient: linear-gradient(135deg, #2E8B57, #00BFFF); /* sea green to cyan */
  --secondary: #1B4D3E;
  --light: #F0FFF0;
  --accent: #E0F7FA;
  --muted: #5f6f6f;
  --white: #fff;
}

/* Header */
.chat-header {
  background: var(--primary-gradient);
  color: #fff;
  padding: 14px;
  font-weight: 700;
  font-size: 18px;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Input Button */
.chat-input button {
  background: var(--primary-gradient);
  border: none;
  padding: 16px 24px;
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  border-bottom-right-radius: 12px;
  transition: 0.3s;
}
.chat-input button:hover {
  filter: brightness(0.9);
}

.chat-header img { width: 32px; height: 32px; }

/* Welcome Banner */
.welcome-banner {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  background: var(--accent);
  padding: 12px;
  font-weight: 600;
  color: var(--secondary);
  border-bottom: 1px solid #ddd;
}
.welcome-banner img { width: 40px; height: 40px; }

/* Chat Body */
.chat-body { flex: 1; padding: 16px; overflow-y: auto; background: #f9fdfb; font-size: 16px; display: flex; flex-direction: column; }
.message {
  max-width: 70%;
  padding: 12px 16px;
  border-radius: 18px;
  margin: 6px 0;
  line-height: 1.4;
}
.bot-message {
  background: var(--accent);
  align-self: flex-start;
  border-bottom-left-radius: 4px;
}
.user-message {
  background: var(--primary);
  color: #fff;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
}
.typing {
  font-style: italic;
  color: var(--muted);
  font-size: 14px;
}

/* Input */
.chat-input { display: flex; border-top: 1px solid #ddd; }
.chat-input input {
  flex: 1; border: none; padding: 16px; font-size: 16px; border-bottom-left-radius: 12px;
}
.chat-input button {
  background: var(--primary); border: none; padding: 16px 24px; color: #fff; font-size: 16px; font-weight: 600;
  cursor: pointer; border-bottom-right-radius: 12px;
}
.chat-input button:hover { background: #1B4D3E; }
</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h2>ü©∫ Health Reminders</h2>
  <div class="reminder" onclick="sendReminder('Why is it important to take morning medicine?')">
    <img src="https://img.icons8.com/color/48/pills.png" alt="Medicine">
    <div><span class="reminder-title">Take Morning Medicine</span><span class="reminder-time">8:00 AM</span></div>
  </div>
  <div class="reminder" onclick="sendReminder('How much water should I drink daily?')">
    <img src="https://img.icons8.com/color/48/water.png" alt="Water">
    <div><span class="reminder-title">Drink 2 Glasses</span><span class="reminder-time">10:00 AM</span></div>
  </div>
  <div class="reminder" onclick="sendReminder('What are the benefits of walking?')">
    <img src="https://img.icons8.com/color/48/walking.png" alt="Walk">
    <div><span class="reminder-title">Take a Walk</span><span class="reminder-time">4:00 PM</span></div>
  </div>
  <div class="reminder" onclick="sendReminder('Why is a balanced diet important?')">
    <img src="https://img.icons8.com/color/48/healthy-food.png" alt="Diet">
    <div><span class="reminder-title">Eat Balanced Meals</span><span class="reminder-time">Daily</span></div>
  </div>
</div>

<!-- Chat -->
<div class="chat-container">
  <div class="chat-box">
    <div class="chat-header">
      <img src="https://img.icons8.com/color/48/stethoscope.png" alt="Logo">
      üí¨ MedBot ‚Äì Educational Health Assistant
    </div>

    <!-- Welcome Banner -->
    <div class="welcome-banner">
      <img src="https://img.icons8.com/color/48/hospital-room.png" alt="Hospital">
      <span>Welcome! Ask me about health, symptoms, or medicines (educational only).</span>
      <img src="https://img.icons8.com/color/48/doctor-male.png" alt="Doctor">
    </div>

    <!-- Chat Messages -->
    <div class="chat-body" id="chatBody">
      <div class="message bot-message"><b>Bot:</b> Hello üëã I‚Äôm MedBot. Type <code>bmi 70 175</code> to check BMI or ask me about health conditions.</div>
    </div>

    <!-- Input -->
    <div class="chat-input">
      <input type="text" id="userInput" placeholder="Type your message...">
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>
</div>

<script>
function typeEffect(element, text, speed=30) {
  let i = 0;
  function typing() {
    if (i < text.length) {
      element.innerHTML += text.charAt(i);
      i++;
      setTimeout(typing, speed);
    }
  }
  typing();
}

async function sendMessage(customMessage=null){
  const input=document.getElementById("userInput");
  const chatBody=document.getElementById("chatBody");
  const userMsg=customMessage||input.value;

  if(userMsg.trim()!==""){
    // Show user bubble
    const userDiv=document.createElement("div");
    userDiv.className="message user-message";
    userDiv.innerHTML="<b>You:</b> "+userMsg;
    chatBody.appendChild(userDiv);
    chatBody.scrollTop=chatBody.scrollHeight;

    // Typing indicator
    const typingDiv=document.createElement("div");
    typingDiv.className="typing";
    typingDiv.innerText="MedBot is typing...";
    chatBody.appendChild(typingDiv);
    chatBody.scrollTop=chatBody.scrollHeight;

    try{
      const res=await fetch("http://127.0.0.1:5000/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:userMsg})});
      const data=await res.json();

      chatBody.removeChild(typingDiv);

      // Bot bubble with typing effect
      const botDiv=document.createElement("div");
      botDiv.className="message bot-message";
      botDiv.innerHTML="<b>Bot:</b> ";
      chatBody.appendChild(botDiv);
      typeEffect(botDiv, " "+data.response, 25);

      chatBody.scrollTop=chatBody.scrollHeight;
    }catch(err){
      chatBody.removeChild(typingDiv);
      const botDiv=document.createElement("div");
      botDiv.className="message bot-message";
      botDiv.innerHTML="<b>Bot:</b> ‚ö†Ô∏è Server not reachable.";
      chatBody.appendChild(botDiv);
    }

    if(!customMessage){input.value="";}
  }
}
function sendReminder(msg){ sendMessage(msg); }
</script>

</body>
</html>